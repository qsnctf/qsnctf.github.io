/* ======================================
   mkdocs-markmap å®Œæ•´è‡ªé€‚åº” CSSï¼ˆç¾åŒ– + é˜²ç›—æ°´å°æœ€ç»ˆç‰ˆï¼‰
   ====================================== */

/* === å®¹å™¨è‡ªé€‚åº” & é«˜åº¦æ§åˆ¶ === */
.language-markmap.mkdocs-markmap {
    height: 60vh !important;
    min-height: 500px !important;
    width: 100% !important;
    padding: 1rem;
    background-color: #f9f9f9;
    border: 2px solid #e0e0e0;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);

    /* ğŸ”´ å…³é”®ï¼šå»ºç«‹ stacking context */
    position: relative;
    overflow: hidden;
}

/* === SVG è‡ªé€‚åº” & å±‚çº§æ§åˆ¶ï¼ˆå¿…é¡»ï¼‰ === */
.language-markmap.mkdocs-markmap > svg {
    width: 100% !important;
    height: 100% !important;

    /* ğŸ”´ SVG å¿…é¡»åœ¨æ°´å°ä¸‹é¢ */
    position: relative;
    z-index: 1;
}

/* === markmap ä¸»é¢˜å˜é‡ === */
.markmap {
  --markmap-max-width: 9999px;
  --markmap-a-color: #0097e6;
  --markmap-a-hover-color: #00a8ff;
  --markmap-code-bg: #f0f0f0;
  --markmap-code-color: #555;
  --markmap-highlight-bg: #ffeaa7;
  --markmap-table-border: 1px solid currentColor;
  --markmap-font: 300 16px/20px "Segoe UI", sans-serif;
  --markmap-circle-open-bg: #fff;
  --markmap-text-color: #333;
  --markmap-highlight-node-bg: #fffae6;

  font: var(--markmap-font);
  color: var(--markmap-text-color);
}

/* === è¿çº¿ === */
.markmap-link {
    fill: none;
}

/* === èŠ‚ç‚¹åœ†ç‚¹ === */
.markmap-node > circle {
    cursor: pointer;
    stroke-width: 1.5;
    stroke: #888;
    fill: var(--markmap-circle-open-bg);
    transition: all 0.3s;
}

.markmap-node > circle:hover {
    stroke: #0097e6;
    stroke-width: 2;
    fill: #e0f7ff;
}

/* === å¤–éƒ¨èŠ‚ç‚¹å†…å®¹ === */
.markmap-foreign {
    display: inline-block;
}

.markmap-foreign p {
    margin: 0;
}

.markmap-foreign a {
    color: var(--markmap-a-color);
    text-decoration: none;
    font-weight: 500;
}

.markmap-foreign a:hover {
    color: var(--markmap-a-hover-color);
    text-decoration: underline;
}

.markmap-foreign code {
    padding: 0.25em 0.4em;
    font-size: calc(1em - 2px);
    color: var(--markmap-code-color);
    background-color: var(--markmap-code-bg);
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.markmap-foreign pre {
    margin: 0;
}

.markmap-foreign pre > code {
    display: block;
}

.markmap-foreign strong {
    font-weight: bold;
}

.markmap-foreign em {
    font-style: italic;
}

.markmap-foreign mark {
    background: var(--markmap-highlight-bg);
    border-radius: 2px;
    padding: 0 2px;
}

/* === è¡¨æ ¼ & å›¾ç‰‡ === */
.markmap-foreign table,
.markmap-foreign th,
.markmap-foreign td {
    border-collapse: collapse;
    border: var(--markmap-table-border);
    padding: 2px 6px;
}

.markmap-foreign img {
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

/* === èŠ‚ç‚¹é«˜äº® === */
.markmap-highlight rect {
    fill: var(--markmap-highlight-node-bg);
    rx: 6;
    ry: 6;
    stroke: #ffc107;
    stroke-width: 1.5;
}

/* =====================================================
   å¹³é“ºé˜²ç›—æ°´å°ï¼ˆåœ¨æ‰€æœ‰æ–‡æœ¬ / èŠ‚ç‚¹ / çº¿æ¡ä¹‹ä¸Šï¼‰
   ===================================================== */

/* === äº®è‰²æ¨¡å¼æ°´å° === */
.language-markmap.mkdocs-markmap::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 10;               /* ğŸ”´ æ°´å°åœ¨æœ€ä¸Šå±‚ */
    pointer-events: none;

    background-repeat: repeat;
    background-size: 320px 200px;

    background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='320' height='200'>\
  <text x='50%' y='50%' \
        text-anchor='middle' \
        dominant-baseline='middle' \
        transform='rotate(-35 160 100)' \
        fill='rgba(0,0,0,0.06)' \
        font-size='28' \
        font-family='Segoe UI, Arial, sans-serif'>\
    é’å°‘å¹´CTFæ–‡åº“çŸ¥è¯†æ ‘\
  </text>\
</svg>");
}

/* === æ·±è‰²æ¨¡å¼ === */
.markmap-dark .language-markmap.mkdocs-markmap {
    background-color: #1a1b26;
    border-color: #333;
}

.markmap-dark .markmap {
    --markmap-code-bg: #1a1b26;
    --markmap-code-color: #ddd;
    --markmap-circle-open-bg: #444;
    --markmap-text-color: #eee;
}

/* === æ·±è‰²æ¨¡å¼æ°´å° === */
.markmap-dark .language-markmap.mkdocs-markmap::before {
    background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='320' height='200'>\
  <text x='50%' y='50%' \
        text-anchor='middle' \
        dominant-baseline='middle' \
        transform='rotate(-35 160 100)' \
        fill='rgba(255,255,255,0.06)' \
        font-size='28' \
        font-family='Segoe UI, Arial, sans-serif'>\
    é’å°‘å¹´CTFæ–‡åº“çŸ¥è¯†æ ‘\
  </text>\
</svg>");
}
